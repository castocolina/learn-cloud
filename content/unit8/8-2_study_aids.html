<h2>Study Aids for 8.2: Secure Credential Management in CI/CD and IaC</h2>

<div class="card mb-4">
    <div class="card-header">
        Key Takeaways
    </div>
    <div class="card-body">
        <ul>
            <li><strong>CI/CD is a Privileged System:</strong> CI/CD and IaC pipelines are high-value targets for attackers because they hold the credentials needed to build, test, and deploy to production. Securing them is critical.</li>
            <li><strong>Avoid Long-Lived Static Secrets:</strong> The core principle is to move away from long-lived, static credentials (like permanent API keys) and towards short-lived, dynamically generated tokens.</li>
            <li><strong>OIDC is the Modern Standard:</strong> OpenID Connect (OIDC) is the best practice for allowing CI/CD systems (like GitHub Actions) to securely authenticate against cloud providers (like AWS) or other services (like Vault) without needing to store static secrets.</li>
            <li><strong>Use a Central Secrets Manager:</strong> For a mature security posture, integrate your CI/CD pipeline with a central secrets manager like HashiCorp Vault. This provides better auditing, granular control, and a single source of truth for all secrets.</li>
            <li><strong>Scope Credentials Tightly:</strong> Always follow the principle of least privilege. Credentials used in a CI/CD job should only have the exact permissions needed for that job, and only for the duration of the job.</li>
        </ul>
    </div>
</div>

<div id="flashcards-section">
    <div class="flashcards-container">

        <div class="flashcard" onclick="this.classList.toggle('flipped')">
            <div class="flashcard-front">
                <button type="button" class="btn btn-sm btn-outline-secondary view-diagram-btn" data-bs-toggle="modal" data-bs-target="#mermaidModal" title="Expand View">
                    <i class="bi bi-arrows-angle-expand"></i>
                </button>
                <h4>Question</h4>
                <p>Why is it a security risk to store a long-lived <code>kubeconfig</code> file as a secret in your CI/CD system?</p>
            </div>
            <div class="flashcard-back">
                <button type="button" class="btn btn-sm btn-outline-secondary view-diagram-btn" data-bs-toggle="modal" data-bs-target="#mermaidModal" title="Expand View">
                    <i class="bi bi-arrows-angle-expand"></i>
                </button>
                <h4>Answer</h4>
                <p>Because if the secret is compromised, an attacker gets long-term, potentially administrative, access to your Kubernetes cluster. The best practice is to generate short-lived <code>kubeconfig</code> files for each deployment job.</p>
            </div>
        </div>

        <div class="flashcard" onclick="this.classList.toggle('flipped')">
            <div class="flashcard-front">
                <button type="button" class="btn btn-sm btn-outline-secondary view-diagram-btn" data-bs-toggle="modal" data-bs-target="#mermaidModal" title="Expand View">
                    <i class="bi bi-arrows-angle-expand"></i>
                </button>
                <h4>Question</h4>
                <p>What is OIDC and how does it help secure CI/CD pipelines?</p>
            </div>
            <div class="flashcard-back">
                <button type="button" class="btn btn-sm btn-outline-secondary view-diagram-btn" data-bs-toggle="modal" data-bs-target="#mermaidModal" title="Expand View">
                    <i class="bi bi-arrows-angle-expand"></i>
                </button>
                <h4>Answer</h4>
                <p>OpenID Connect (OIDC) is an authentication layer on top of OAuth 2.0. It allows a CI/CD job to prove its identity to a cloud provider (like AWS) using a short-lived JWT. The provider can then grant it temporary credentials, avoiding the need to store static API keys in the CI system.</p>
            </div>
        </div>

        <div class="flashcard" onclick="this.classList.toggle('flipped')">
            <div class="flashcard-front">
                <button type="button" class="btn btn-sm btn-outline-secondary view-diagram-btn" data-bs-toggle="modal" data-bs-target="#mermaidModal" title="Expand View">
                    <i class="bi bi-arrows-angle-expand"></i>
                </button>
                <h4>Question</h4>
                <p>What is the primary benefit of integrating a CI/CD pipeline with HashiCorp Vault?</p>
            </div>
            <div class="flashcard-back">
                <button type="button" class="btn btn-sm btn-outline-secondary view-diagram-btn" data-bs-toggle="modal" data-bs-target="#mermaidModal" title="Expand View">
                    <i class="bi bi-arrows-angle-expand"></i>
                </button>
                <h4>Answer</h4>
                <p>It centralizes secrets management, providing a single source of truth with strong auditing and access control. It allows the CI/CD job to fetch secrets dynamically using a short-lived token, rather than storing them directly in the CI system.</p>
            </div>
        </div>

        <div class="flashcard" onclick="this.classList.toggle('flipped')">
            <div class="flashcard-front">
                <button type="button" class="btn btn-sm btn-outline-secondary view-diagram-btn" data-bs-toggle="modal" data-bs-target="#mermaidModal" title="Expand View">
                    <i class="bi bi-arrows-angle-expand"></i>
                </button>
                <h4>Question</h4>
                <p>What is Atlantis?</p>
            </div>
            <div class="flashcard-back">
                <button type="button" class="btn btn-sm btn-outline-secondary view-diagram-btn" data-bs-toggle="modal" data-bs-target="#mermaidModal" title="Expand View">
                    <i class="bi bi-arrows-angle-expand"></i>
                </button>
                <h4>Answer</h4>
                <p>Atlantis is an open-source tool that automates Terraform by running <code>terraform plan</code> and <code>apply</code> from within pull request comments. It helps teams collaborate on infrastructure changes with a clear review and approval workflow.</p>
            </div>
        </div>

        <div class="flashcard" onclick="this.classList.toggle('flipped')">
            <div class="flashcard-front">
                <button type="button" class="btn btn-sm btn-outline-secondary view-diagram-btn" data-bs-toggle="modal" data-bs-target="#mermaidModal" title="Expand View">
                    <i class="bi bi-arrows-angle-expand"></i>
                </button>
                <h4>Question</h4>
                <p>What is the "principle of least privilege" in the context of CI/CD credentials?</p>
            </div>
            <div class="flashcard-back">
                <button type="button" class="btn btn-sm btn-outline-secondary view-diagram-btn" data-bs-toggle="modal" data-bs-target="#mermaidModal" title="Expand View">
                    <i class="bi bi-arrows-angle-expand"></i>
                </button>
                <h4>Answer</h4>
                <p>It means that the credentials used by a CI/CD job should have only the minimum set of permissions required to perform its task, and only for the minimum amount of time necessary. For example, a job that only pushes to an S3 bucket should only have <code>s3:PutObject</code> permission, not full admin access.</p>
            </div>
        </div>

    </div>
</div>
